{"version":3,"file":"PublishModal.js","sources":["pages/life/components/PublishModal.vue","C:/Users/希希/Documents/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovdW5pYXBwL215LWxpZmVSZWNvcmQvcGFnZXMvbGlmZS9jb21wb25lbnRzL1B1Ymxpc2hNb2RhbC52dWU"],"sourcesContent":["<template>\n  <view class=\"modal-overlay\" @tap=\"$emit('hidePublishDialog')\">\n    <view class=\"modal-content\" @tap.stop>\n      <view class=\"modal-header\">\n        <text class=\"modal-title\">发布动态</text>\n        <text class=\"close-btn\" @tap=\"$emit('hidePublishDialog')\">×</text>\n      </view>\n      \n      <textarea \n        class=\"publish-textarea\"\n        placeholder=\"分享你的生活...\"\n        v-model=\"newPost.content\"\n      />\r\n\t  <view class=\"space-y-3\" >\r\n\t\t   <button @click=\"chooseImage\">选择图片</button>\r\n<!-- \t\t    <view class=\"flex items-center gap-2\">\r\n\t\t                       <Image class=\"h-5 w-5 text-gray-500\" />\r\n\t\t                       <Camera class=\"h-5 w-5 text-gray-500\" />\r\n\t\t                     </view> -->\r\n\t  </view>\n    \n      <view class=\"publish-options\">\n        <view \n          class=\"option-item\"\n          :class=\"{ active: newPost.isPublic }\"\n          @tap=\"newPost.isPublic = true\"\n        >\n          <text class=\"iconfont icon-globe\"></text>\n          公开\n        </view>\n        <view \n          class=\"option-item\"\n          :class=\"{ active: !newPost.isPublic }\"\n          @tap=\"newPost.isPublic = false\"\n        >\n          <text class=\"iconfont icon-lock\"></text>\n          私密\n        </view>\n      </view>\n      \n      <button class=\"confirm-btn\" @tap=\"$emit('publishPost')\">发布动态</button>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { defineProps, defineEmits } from 'vue'\nconst props = defineProps({\n  newPost: {\n    type: Object,\n    default: () => ({ content: '', isPublic: true })\n  }\n})\r\n// 在life.vue的script中添加\nconst chooseImage = async () => {\n  try {\n    const res = await uni.chooseImage({\n      count: 1,  // 最多选择1张\n      sizeType: ['original', 'compressed'],  // 原图/压缩图\n      sourceType: ['album']  // 仅从相册选择\n    })\n    \n    // res.tempFilePaths 为选择的图片路径数组\n    if (res.tempFilePaths.length) {\n      const imagePath = res.tempFilePaths[0]\n      // 可在这里调用上传接口将图片上传到服务器\n      console.log('选择的图片路径：', imagePath)\n      // 示例：将图片路径添加到新发布的内容中\n      newPost.images = [imagePath]\n    }\n  } catch (err) {\n    console.error('选择图片失败：', err)\n  }\n}\r\nconst uploadToServer = async (tempFilePath) => {\n  const uploadRes = await uni.uploadFile({\n    url: '你的上传接口地址',\n    filePath: tempFilePath,\n    name: 'file',\n    formData: { 'user': 'test' }\n  })\n  return JSON.parse(uploadRes.data).url  // 返回服务器图片地址\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 40rpx;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 32rpx;\n  width: 100%;\n  max-width: 600rpx;\n  padding: 40rpx;\n  \n  .modal-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 32rpx;\n    .modal-title {\n      font-size: 36rpx;\n      font-weight: 600;\n    }\n    .close-btn {\n      font-size: 48rpx;\n      color: #999;\n      cursor: pointer;\n    }\n  }\n  \n  .publish-textarea {\n    width: 100%;\n    min-height: 200rpx;\n    border: 2rpx solid #eee;\n    border-radius: 16rpx;\n    padding: 24rpx;\n    font-size: 32rpx;\n    line-height: 1.5;\n    margin-bottom: 24rpx;\n  }\n  \n  .publish-options {\n    display: flex;\n    gap: 24rpx;\n    margin-bottom: 32rpx;\n    .option-item {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 24rpx;\n      border: 2rpx solid #eee;\n      border-radius: 16rpx;\n      transition: all 0.3s;\n      &.active {\n        border-color: #ff6b35;\n        background: rgba(255, 107, 53, 0.1);\n        color: #ff6b35;\n      }\n      .iconfont {\n        margin-right: 8rpx;\n      }\n    }\n  }\n  \n  .confirm-btn {\n    width: 100%;\n    height: 88rpx;\n    background: linear-gradient(135deg, #ff6b35, #f093fb);\n    color: white;\n    border: none;\n    border-radius: 24rpx;\n    font-size: 32rpx;\n    font-weight: 600;\n  }\n}\n</style>","import Component from 'D:/uniapp/my-lifeRecord/pages/life/components/PublishModal.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":";;;;;;;;;;;AAsDA,UAAM,cAAc,YAAY;AAC9B,UAAI;AACF,cAAM,MAAM,MAAMA,cAAG,MAAC,YAAY;AAAA,UAChC,OAAO;AAAA;AAAA,UACP,UAAU,CAAC,YAAY,YAAY;AAAA;AAAA,UACnC,YAAY,CAAC,OAAO;AAAA;AAAA,QAC1B,CAAK;AAGD,YAAI,IAAI,cAAc,QAAQ;AAC5B,gBAAM,YAAY,IAAI,cAAc,CAAC;AAErCA,wBAAAA,MAAY,MAAA,OAAA,gDAAA,YAAY,SAAS;AAEjC,kBAAQ,SAAS,CAAC,SAAS;AAAA,QAC5B;AAAA,MACF,SAAQ,KAAK;AACZA,sBAAAA,qEAAc,WAAW,GAAG;AAAA,MAC7B;AAAA,IACH;;;;;;;;;;;;;;;;;;;;ACxEA,GAAG,gBAAgB,SAAS;"}