{"version":3,"file":"PublicPosts.js","sources":["pages/life/components/PublicPosts.vue","C:/Users/希希/Documents/HBuilderX.4.24.2024072208/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovdW5pYXBwL215LWxpZmVSZWNvcmQvcGFnZXMvbGlmZS9jb21wb25lbnRzL1B1YmxpY1Bvc3RzLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"tab-content\">\n    <view \n      v-for=\"post in posts\" \n      :key=\"post.id\"\n      class=\"post-card\"\n    >\n      <view class=\"post-header\">\n        <image class=\"avatar\" :src=\"post.avatar\" />\n        <view class=\"user-info\">\n          <text class=\"username\">{{ post.author }}</text>\n          <text class=\"timestamp\">{{ post.timestamp }}</text>\n        </view>\n      </view>\n      \n      <view class=\"post-content\">\n        <text class=\"content-text\">{{ post.content }}</text>\n        <image \n          v-if=\"post.images && post.images.length > 0\"\n          class=\"post-image\"\n          :src=\"post.images[0]\"\n          mode=\"aspectFill\"\n        />\n      </view>\n      \n      <view class=\"post-actions\">\n        <view \n          class=\"action-item\"\n          :class=\"{ liked: post.isLiked }\"\n          @tap=\"$emit('toggleLike', post.id)\"\n        >\n          <SvgIcon :iconClass=\"post.isLiked ?'icon-dianzan1':'icon-fabulous'\" size=\"24\"/>\n          <text>{{ post.likes }}</text>\n        </view>\n        <view class=\"action-item\" @tap=\"$emit('showComments', post.id)\">\n          <SvgIcon iconClass=\"icon-comments\"  size=\"24\"  />\n          <text>{{ post.comments }}</text>\n        </view>\n        <view class=\"action-item\" @tap=\"handleShare(post)\">\n          <SvgIcon iconClass=\"icon-share\"  size=\"16\"/>\n          <text>分享</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { defineProps } from 'vue'\nimport { showActionSheet, shareAppMessage } from '@/utils/wechat' // 假设引入微信API工具\n\nconst props = defineProps({\n  posts: {\n    type: Array,\n    default: () => []\n  }\n})\r\n\n// 处理分享逻辑\nconst handleShare = (post) => {\r\n\t\n  // 显示分享选项\n  showActionSheet({\n    itemList: ['分享给微信好友', '分享到朋友圈', '保存图片'],\n    success: (res) => {\n      switch(res.tapIndex) {\n        case 0:\n          // 分享给微信好友\n          shareToWechatFriend(post)\n          break\n        case 1:\n          // 分享到朋友圈\n          shareToTimeline(post)\n          break\n        case 2:\n          // 保存图片逻辑\n          $emit('savePostImage', post.id)\n          break\n      }\n    }\n  })\n}\n\n// 分享给微信好友\nconst shareToWechatFriend = (post) => {\n  shareAppMessage({\n    title: `${post.author}的动态`,\n    path: `/pages/post/detail?id=${post.id}`,\n    imageUrl: post.images && post.images.length > 0 ? post.images[0] : '',\n    success: () => {\n      console.log('分享成功')\n    },\n    fail: (err) => {\n      console.log('分享失败', err)\n    }\n  })\n}\n\n// 分享到朋友圈\nconst shareToTimeline = (post) => {\n  // 微信朋友圈分享API\n  wx.updateShareMenu({\n    withShareTicket: true,\n    isTimelineShare: true\n  })\n  \n  wx.shareTimeline({\n    title: `${post.author}的动态: ${post.content.substring(0, 20)}...`,\n    query: `id=${post.id}`,\n    imageUrl: post.images && post.images.length > 0 ? post.images[0] : '',\n    success: () => {\n      console.log('朋友圈分享成功')\n    },\n    fail: (err) => {\n      console.log('朋友圈分享失败', err)\n    }\n  })\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.tab-content {\n  .post-card {\n    background: white;\n    border-radius: 32rpx;\n    margin-bottom: 32rpx;\n    overflow: hidden;\n    box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n    transition: all 0.3s ease; /* 添加过渡效果 */\n    transform-origin: center top; /* 设置变换原点 */\n    \n    // 卡片抬起效果\n    &:active {\n      transform: translateY(-8rpx);\n      box-shadow: 0 16rpx 40rpx rgba(0, 0, 0, 0.15);\n    }\n\n    .post-header {\n      display: flex;\n      align-items: center;\n      padding: 32rpx;\n      border-bottom: 2rpx solid #f5f5f5;\n      .avatar {\n        width: 80rpx;\n        height: 80rpx;\n        border-radius: 50%;\n        margin-right: 24rpx;\n      }\n      .user-info {\n        .username {\n          display: block;\n          font-weight: 600;\n          font-size: 32rpx;\n        }\n        .timestamp {\n          font-size: 24rpx;\n          color: #999;\n        }\n      }\n    }\n\n    .post-content {\n      padding: 32rpx;\n      .content-text {\n        display: block;\n        line-height: 1.6;\n        margin-bottom: 24rpx;\n      }\n      .post-image {\n        width: 100%;\n        height: 360rpx;\n        border-radius: 16rpx;\n      }\n    }\n\n    .post-actions {\n      display: flex;\n      padding: 24rpx 32rpx;\n      border-top: 2rpx solid #f5f5f5;\n      .action-item {\n        display: flex;\n        align-items: center;\n        padding: 16rpx 24rpx;\n        border-radius: 16rpx;\n        margin-right: 24rpx;\n        color: #666;\n        font-size: 28rpx;\n        transition: all 0.3s;\n        &.liked {\n          color: #e91e63;\n          background: rgba(233, 30, 99, 0.1);\n        }\n        &:active {\n          background-color: #f5f5f5;\n        }\n        .iconfont {\n          margin-right: 8rpx;\n        }\n      }\n    }\n  }\n}\n</style>","import Component from 'D:/uniapp/my-lifeRecord/pages/life/components/PublicPosts.vue'\nwx.createComponent(Component)"],"names":["showActionSheet","shareAppMessage","uni","wx"],"mappings":";;;;;;;;;;;;;;;;AA2DA,UAAM,cAAc,CAAC,SAAS;AAG5BA,mCAAgB;AAAA,QACd,UAAU,CAAC,WAAW,UAAU,MAAM;AAAA,QACtC,SAAS,CAAC,QAAQ;AAChB,kBAAO,IAAI,UAAQ;AAAA,YACjB,KAAK;AAEH,kCAAoB,IAAI;AACxB;AAAA,YACF,KAAK;AAEH,8BAAgB,IAAI;AACpB;AAAA,YACF,KAAK;AAEH,oBAAM,iBAAiB,KAAK,EAAE;AAC9B;AAAA,UACH;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,sBAAsB,CAAC,SAAS;AACpCC,mCAAgB;AAAA,QACd,OAAO,GAAG,KAAK,MAAM;AAAA,QACrB,MAAM,yBAAyB,KAAK,EAAE;AAAA,QACtC,UAAU,KAAK,UAAU,KAAK,OAAO,SAAS,IAAI,KAAK,OAAO,CAAC,IAAI;AAAA,QACnE,SAAS,MAAM;AACbC,wBAAAA,MAAA,MAAA,OAAA,+CAAY,MAAM;AAAA,QACnB;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAAA,kEAAY,QAAQ,GAAG;AAAA,QACxB;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,kBAAkB,CAAC,SAAS;AAEhCC,oBAAAA,KAAG,gBAAgB;AAAA,QACjB,iBAAiB;AAAA,QACjB,iBAAiB;AAAA,MACrB,CAAG;AAEDA,oBAAAA,KAAG,cAAc;AAAA,QACf,OAAO,GAAG,KAAK,MAAM,QAAQ,KAAK,QAAQ,UAAU,GAAG,EAAE,CAAC;AAAA,QAC1D,OAAO,MAAM,KAAK,EAAE;AAAA,QACpB,UAAU,KAAK,UAAU,KAAK,OAAO,SAAS,IAAI,KAAK,OAAO,CAAC,IAAI;AAAA,QACnE,SAAS,MAAM;AACbD,wBAAAA,MAAY,MAAA,OAAA,gDAAA,SAAS;AAAA,QACtB;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAAA,MAAY,MAAA,OAAA,gDAAA,WAAW,GAAG;AAAA,QAC3B;AAAA,MACL,CAAG;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpHA,GAAG,gBAAgB,SAAS;"}